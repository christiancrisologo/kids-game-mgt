(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{322:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(5155),r=t(2115),n=t(5453),l=t(3970);let i=(0,n.v)(e=>({games:[],loading:!1,error:"",fetchGames:async()=>{e({loading:!0,error:""});let{data:a,error:t}=await l.N.from("Games").select("*");t?e({error:t.message,loading:!1}):e({games:a||[],loading:!1})},addGame:async(a,t)=>{e({loading:!0,error:""});let{error:s}=await l.N.from("Games").insert([{name:a,description:t}]);s?e({error:s.message,loading:!1}):(await i.getState().fetchGames(),e({loading:!1}))},updateGame:async(a,t,s)=>{e({loading:!0,error:""});let{error:r}=await l.N.from("Games").update({name:t,description:s}).eq("id",a);r?e({error:r.message,loading:!1}):(await i.getState().fetchGames(),e({loading:!1}))},deleteGame:async a=>{e({loading:!0,error:""});let{error:t}=await l.N.from("Games").delete().eq("id",a);t?e({error:t.message,loading:!1}):(await i.getState().fetchGames(),e({loading:!1}))}}));var o=t(3294),d=t(5695);function u(){let{games:e,loading:a,error:t,fetchGames:n,addGame:l,updateGame:u,deleteGame:c}=i(),{user:m}=(0,o.n)(),g=(0,d.useRouter)(),[p,x]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[N,b]=(0,r.useState)(null),[v,y]=(0,r.useState)(""),[w,j]=(0,r.useState)(""),[S,C]=(0,r.useState)(!1),[I,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m?n():g.replace("/login")},[m,n,g]);let G=async e=>{e.preventDefault(),C(!0),await l(p,h),x(""),f(""),C(!1)},_=async e=>{await c(e)},U=()=>{b(null),y(""),j("")},k=async e=>{e.preventDefault(),N&&(E(!0),await u(N,v,w),U(),E(!1))};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 to-blue-100 flex flex-col items-center py-10",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Games"}),(0,s.jsxs)("form",{onSubmit:G,className:"bg-white rounded shadow p-4 mb-6 w-full max-w-md flex flex-col gap-2",children:[(0,s.jsx)("input",{className:"px-3 py-2 border rounded focus:outline-none focus:ring",type:"text",placeholder:"Game Name",value:p,onChange:e=>x(e.target.value),required:!0}),(0,s.jsx)("input",{className:"px-3 py-2 border rounded focus:outline-none focus:ring",type:"text",placeholder:"Description",value:h,onChange:e=>f(e.target.value)}),(0,s.jsx)("button",{className:"bg-purple-600 text-white py-2 rounded hover:bg-purple-700 transition",type:"submit",disabled:S,children:S?"Creating...":"Add Game"})]}),a&&(0,s.jsx)("div",{children:"Loading..."}),t&&(0,s.jsx)("div",{className:"text-red-500",children:t}),(0,s.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[e.map(e=>{var a;return(0,s.jsx)("div",{className:"bg-white rounded shadow p-4 flex flex-col relative",children:N===e.id?(0,s.jsxs)("form",{onSubmit:k,className:"flex flex-col gap-2",children:[(0,s.jsx)("input",{className:"px-3 py-2 border rounded focus:outline-none focus:ring",type:"text",value:v,onChange:e=>y(e.target.value),required:!0}),(0,s.jsx)("input",{className:"px-3 py-2 border rounded focus:outline-none focus:ring",type:"text",value:w,onChange:e=>j(e.target.value)}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"bg-purple-600 text-white py-1 px-3 rounded hover:bg-purple-700 transition text-sm",type:"submit",disabled:I,children:I?"Saving...":"Save"}),(0,s.jsx)("button",{className:"bg-gray-300 text-gray-700 py-1 px-3 rounded hover:bg-gray-400 transition text-sm",type:"button",onClick:U,children:"Cancel"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"font-semibold",children:e.name}),(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:e.description}),(0,s.jsxs)("span",{className:"text-gray-400 text-xs",children:["Created: ",null==(a=e.created_at)?void 0:a.slice(0,10)]}),(0,s.jsxs)("div",{className:"absolute top-2 right-2 flex gap-2",children:[(0,s.jsx)("button",{className:"text-xs text-blue-500 hover:underline",onClick:()=>{b(e.id),y(e.name),j(e.description||"")},children:"Edit"}),(0,s.jsx)("button",{className:"text-xs text-red-500 hover:underline",onClick:()=>_(e.id),children:"Delete"})]})]})},e.id)}),0===e.length&&!a&&(0,s.jsx)("div",{children:"No games found."})]})]})}},1760:e=>{function a(e){var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}a.keys=()=>[],a.resolve=a,a.id=1760,e.exports=a},3294:(e,a,t)=>{"use strict";t.d(a,{n:()=>n});var s=t(5453),r=t(3970);let n=(0,s.v)(e=>({user:null,loading:!1,error:"",login:async(a,t)=>{e({loading:!0,error:""});let{data:s,error:n}=await r.N.auth.signInWithPassword({email:a,password:t});n?e({error:n.message,loading:!1}):e({user:s.user,loading:!1})},register:async(a,t)=>{e({loading:!0,error:""});let{data:s,error:n}=await r.N.auth.signUp({email:a,password:t});n?e({error:n.message,loading:!1}):e({user:s.user,loading:!1})},logout:async()=>{e({loading:!0,error:""});let{error:a}=await r.N.auth.signOut();a?e({error:a.message,loading:!1}):e({user:null,loading:!1})},setUser:a=>e({user:a})}))},3970:(e,a,t)=>{"use strict";t.d(a,{N:()=>l});var s=t(2354);let r="https://jtpzzbognaeitsffarcd.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp0cHp6Ym9nbmFlaXRzZmZhcmNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3ODUzMTQsImV4cCI6MjA3MDM2MTMxNH0.EKnCEKxKKLLs9iWkHdBHdyWeyrQsHa6IU02NTNGatao";if(!r||!n)throw Error("Supabase environment variables are missing. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your .env.local file.");let l=(0,s.UU)(r,n)},6681:(e,a,t)=>{Promise.resolve().then(t.bind(t,322))}},e=>{e.O(0,[508,441,964,358],()=>e(e.s=6681)),_N_E=e.O()}]);
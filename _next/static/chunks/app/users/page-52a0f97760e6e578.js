(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{1260:(e,s,a)=>{Promise.resolve().then(a.bind(a,7564))},3294:(e,s,a)=>{"use strict";a.d(s,{n:()=>n});var r=a(5453),t=a(3970);let n=(0,r.v)(e=>({user:null,loading:!1,error:"",login:async(s,a)=>{e({loading:!0,error:""});let{data:r,error:n}=await t.N.auth.signInWithPassword({email:s,password:a});n?e({error:n.message,loading:!1}):e({user:r.user,loading:!1})},register:async(s,a)=>{e({loading:!0,error:""});let{data:r,error:n}=await t.N.auth.signUp({email:s,password:a});n?e({error:n.message,loading:!1}):e({user:r.user,loading:!1})},logout:async()=>{e({loading:!0,error:""});let{error:s}=await t.N.auth.signOut();s?e({error:s.message,loading:!1}):e({user:null,loading:!1})},setUser:s=>e({user:s})}))},3970:(e,s,a)=>{"use strict";a.d(s,{N:()=>l});var r=a(2354);let t="https://jtpzzbognaeitsffarcd.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp0cHp6Ym9nbmFlaXRzZmZhcmNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3ODUzMTQsImV4cCI6MjA3MDM2MTMxNH0.EKnCEKxKKLLs9iWkHdBHdyWeyrQsHa6IU02NTNGatao";if(!t||!n)throw Error("Supabase environment variables are missing. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your .env.local file.");let l=(0,r.UU)(t,n)},7564:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var r=a(5155),t=a(2115),n=a(5453),l=a(3970);let i=(0,n.v)(e=>({users:[],loading:!1,error:"",fetchUsers:async()=>{e({loading:!0,error:""});let{data:s,error:a}=await l.N.from("Users").select("*");a?e({error:a.message,loading:!1}):e({users:s||[],loading:!1})},addUser:async(s,a)=>{e({loading:!0,error:""});let{error:r}=await l.N.from("Users").insert([{email:s,username:a}]);r?e({error:r.message,loading:!1}):(await i.getState().fetchUsers(),e({loading:!1}))},updateUser:async(s,a,r)=>{e({loading:!0,error:""});let{error:t}=await l.N.from("Users").update({email:a,username:r}).eq("id",s);t?e({error:t.message,loading:!1}):(await i.getState().fetchUsers(),e({loading:!1}))},deleteUser:async s=>{e({loading:!0,error:""});let{error:a}=await l.N.from("Users").delete().eq("id",s);a?e({error:a.message,loading:!1}):(await i.getState().fetchUsers(),e({loading:!1}))}}));var o=a(3294),d=a(5695);function u(){let{users:e,loading:s,error:a,fetchUsers:n,addUser:l,updateUser:u,deleteUser:c}=i(),{user:g}=(0,o.n)(),m=(0,d.useRouter)(),[x,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[b,N]=(0,t.useState)(null),[v,y]=(0,t.useState)(""),[w,j]=(0,t.useState)(""),[U,S]=(0,t.useState)(!1),[I,C]=(0,t.useState)(!1);(0,t.useEffect)(()=>{g?n():m.replace("/login")},[g,n,m]);let E=async e=>{e.preventDefault(),S(!0),await l(x,p),h(""),f(""),S(!1)},_=async e=>{await c(e)},k=()=>{N(null),y(""),j("")},J=async e=>{e.preventDefault(),b&&(C(!0),await u(b,v,w),k(),C(!1))};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 to-pink-100 flex flex-col items-center py-10",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Users"}),(0,r.jsxs)("form",{onSubmit:E,className:"bg-white rounded shadow p-4 mb-6 w-full max-w-md flex flex-col gap-2",children:[(0,r.jsx)("input",{className:"px-3 py-2 border rounded focus:outline-none focus:ring",type:"email",placeholder:"Email",value:x,onChange:e=>h(e.target.value),required:!0}),(0,r.jsx)("input",{className:"px-3 py-2 border rounded focus:outline-none focus:ring",type:"text",placeholder:"Username",value:p,onChange:e=>f(e.target.value)}),(0,r.jsx)("button",{className:"bg-green-600 text-white py-2 rounded hover:bg-green-700 transition",type:"submit",disabled:U,children:U?"Creating...":"Add User"})]}),s&&(0,r.jsx)("div",{children:"Loading..."}),a&&(0,r.jsx)("div",{className:"text-red-500",children:a}),(0,r.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[e.map(e=>{var s;return(0,r.jsx)("div",{className:"bg-white rounded shadow p-4 flex flex-col relative",children:b===e.id?(0,r.jsxs)("form",{onSubmit:J,className:"flex flex-col gap-2",children:[(0,r.jsx)("input",{className:"px-3 py-2 border rounded focus:outline-none focus:ring",type:"email",value:v,onChange:e=>y(e.target.value),required:!0}),(0,r.jsx)("input",{className:"px-3 py-2 border rounded focus:outline-none focus:ring",type:"text",value:w,onChange:e=>j(e.target.value)}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{className:"bg-green-600 text-white py-1 px-3 rounded hover:bg-green-700 transition text-sm",type:"submit",disabled:I,children:I?"Saving...":"Save"}),(0,r.jsx)("button",{className:"bg-gray-300 text-gray-700 py-1 px-3 rounded hover:bg-gray-400 transition text-sm",type:"button",onClick:k,children:"Cancel"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"font-semibold",children:e.username||e.email}),(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:e.email}),(0,r.jsxs)("span",{className:"text-gray-400 text-xs",children:["Joined: ",null==(s=e.created_at)?void 0:s.slice(0,10)]}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex gap-2",children:[(0,r.jsx)("button",{className:"text-xs text-blue-500 hover:underline",onClick:()=>{N(e.id),y(e.email),j(e.username||"")},children:"Edit"}),(0,r.jsx)("button",{className:"text-xs text-red-500 hover:underline",onClick:()=>_(e.id),children:"Delete"})]})]})},e.id)}),0===e.length&&!s&&(0,r.jsx)("div",{children:"No users found."})]})]})}}},e=>{e.O(0,[508,441,964,358],()=>e(e.s=1260)),_N_E=e.O()}]);